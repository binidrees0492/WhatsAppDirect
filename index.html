<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Direct</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center min-h-screen p-4">
<div class="relative bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg transform transition-all">
    <h1 class="text-3xl font-extrabold text-gray-800 mb-6 text-center">Phone Number Formatter</h1>

    <!-- Country Code Dropdown -->
    <div class="mb-6">
        <label for="countryCode" class="block text-sm font-medium text-gray-700 mb-2">Select Country Code</label>
        <select id="countryCode" class="block w-full p-3 border border-gray-200 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200">
            <option value="+92" selected>Pakistan (+92)</option>
            <option value="+1">United States (+1)</option>
            <option value="+44">United Kingdom (+44)</option>
            <option value="+91">India (+91)</option>
            <option value="+86">China (+86)</option>
            <option value="+81">Japan (+81)</option>
            <!-- Add more country codes as needed -->
        </select>
    </div>

    <!-- Phone Number Input -->
    <div class="mb-6">
        <label for="phoneInput" class="block text-sm font-medium text-gray-700 mb-2">Enter Phone Number</label>
        <div class="flex items-center space-x-2">
            <input type="text" id="phoneInput" class="block w-full p-3 border border-gray-200 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200" placeholder="e.g., 03001234567">
            <button id="pasteButton" class="p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400 transition duration-200">Paste</button>
        </div>
    </div>

    <!-- Output and WhatsApp Link -->
    <div class="mb-6">
        <label for="reformedNumber" class="block text-sm font-medium text-gray-700 mb-2">Formatted Number</label>
        <div class="flex items-center space-x-2">
            <input type="text" id="reformedNumber" class="block w-full p-3 border border-gray-200 rounded-l-lg bg-gray-50" readonly>
            <a id="whatsappLink" href="#" target="_blank" class="p-3 bg-green-500 text-white rounded-r-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 transition duration-200 pointer-events-none opacity-50">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 0C5.373 0 0 5.373 0 12c0 2.134.559 4.218 1.627 6.062L0 24l6.094-1.594A11.944 11.944 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 22.125c-1.918 0-3.705-.547-5.219-1.5l-.375.234-3.562.938.938-3.562.234-.375a10.07 10.07 0 01-1.5-5.219c0-5.566 4.559-10.125 10.125-10.125S22.125 6.434 22.125 12 17.566 22.125 12 22.125zm4.313-7.5c-.234-.117-1.406-.703-1.625-.781-.219-.078-.375-.117-.531.117-.156.234-.625.781-.75.938-.117.156-.234.176-.469.059-.234-.117-1.008-.375-1.922-1.195-.703-.625-1.195-1.406-1.313-1.641-.117-.234 0-.352.117-.469l.352-.352c.117-.117.156-.234.234-.39-.078-.313-.234-.703-.313-.938-.078-.234-.234-.234-.352-.234h-.313c-.234 0-.469.117-.703.351-.781.781-1.016 1.992-.313 3.047.703 1.055 1.406 1.875 1.641 2.11.234.234 2.344 3.75 5.625 3.281.547-.078 1.055-.313 1.406-.586.351-.273.351-.703.273-.938l-.234-.352z"/>
                </svg>
            </a>
        </div>
        <p id="errorMessage" class="text-red-500 text-sm mt-2 hidden">Number must start with 3 and be 10 digits long.</p>
    </div>

    <!-- Watermark -->
    <a href="https://www.upwork.com/freelancers/~0116016922bcbaf586" target="_blank" class="absolute bottom-2 right-4 text-red-400 text-sm font-semibold opacity-50 select-none" >
        AXHAN IT Globe
    </a>
</div>

<script>
    const phoneInput = document.getElementById('phoneInput');
    const countryCode = document.getElementById('countryCode');
    const reformedNumber = document.getElementById('reformedNumber');
    const whatsappLink = document.getElementById('whatsappLink');
    const errorMessage = document.getElementById('errorMessage');
    const pasteButton = document.getElementById('pasteButton');

    // Paste button functionality
    pasteButton.addEventListener('click', async () => {
        try {
            const text = await navigator.clipboard.readText();
            phoneInput.value = text;
            processNumber();
        } catch (err) {
            console.error('Failed to paste:', err);
        }
    });

    // Real-time processing on input
    phoneInput.addEventListener('input', () => {
        processNumber();
    });

    // Process on country code change
    countryCode.addEventListener('change', () => {
        processNumber();
    });

    function processNumber() {
        // Clear previous error
        errorMessage.classList.add('hidden');

        // Get input and clean it
        let number = phoneInput.value.replace(/\D/g, '');

        // Take last 10 digits
        number = number.slice(-10);

        // Validate: 10 digits and starts with 3
        if (number.length === 10 && number.startsWith('3')) {
            const formatted = countryCode.value.replace('+', '') + number;
            reformedNumber.value = formatted;
            whatsappLink.href = `https://wa.me/${formatted}`;
            whatsappLink.classList.remove('pointer-events-none', 'opacity-50');
        } else {
            reformedNumber.value = '';
            whatsappLink.href = '#';
            whatsappLink.classList.add('pointer-events-none', 'opacity-50');
            errorMessage.classList.remove('hidden');
        }
    }
</script>
</body>
</html>
